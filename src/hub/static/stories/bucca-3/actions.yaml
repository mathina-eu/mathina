actions:
  - type: background
    src: bg3_plain.jpg
    style: "position: absolute; left: 0; width: 100%; height: 100%; z-index: -1;"


  - type: sceneText
    text: >
      <h1>The lost treasure</h1>
      
  - type: image
    id: Mathina0
    src: $COMMON/img/characters/mathina/mathina4.png
    style: "height: 70%; bottom: -10%; right: 5%;  z-index: 2; transform: ScaleX(-1);"
          
  - type: sceneText
    text: >
      <p>No school this week. Mathina was already thinking about what to do during the holiday. Her mind was wandering around some nice adventures and new discoveries when a sudden noise echoed from outside the windows. In the garden, an envelope attached to a piece of wood. 
      </br >
      </br >
      Mathina ran out and opened the envelope carefully. There was a letter inside.</p>
                   
  - type: image
    id: Paper0
    src: Pergamena.png
    style: "height: 40%; bottom: 2%; left: 2%;  z-index: 2;"
             

      
  - type: sceneText
    text: >
      <p>‚Äú<i>Dear Mathina,</br>
        I hope you remember me. We met some times ago at the market on Buccaneer Island, with John the parrot. If I recall well, you liked the adventures on the island a lot. If you wish, I could have a little help on a new adventure. I fear that somebody is spying on me, so I prepared a coded message for you. The message behind this letter will tell you where and when to meet. I did not specify the key, but I am sure you will find the right one with just a few trials. Oh, I also added a little twist to avoid spies. If you want a hint, you will find a nice wooden art inside the envelope.
        </br>
        </br>
        Best,</br>
        Angela</i>‚Äú</p>
  - type: sceneText
    text: >
      <p>A short message was written on the back, clearly encoded in some way:  
      </br >
      </br >
      YIVGNDZCOIJFXJYZCOMVZIMVWZCOOVBIDIMJHRJMMJHJOZHOZZH</p>
  - type: image
    id: CaesarJewel
    src: disco_ba.png
    style: "height: 50%; top: 45%;"
    align: center
  - type: sceneText
    text: >
      <p>Mathina's mind immediately returned to that day at the market. She went to her room and found the jewel that Angela had given her. It was a brass pendant engraved with the letters of the alphabet shown in two concentric circles that could be rotated.</p>

  - type: clearImage
    id: Paper0

  - type: animation
    target: CaesarJewel
    vars:
      duration: 3
      xPercent: -150
      yPercent: 0
      ease: power3.out
  - type: sceneText
    text: >
      <p>Thanks to that jewel, Mathina had learned one of the methods that the pirates of Buccaneer Island used to encrypt messages. It was, after all, very simple: each letter of the message to be deciphered has to be searched for in the inner circle and replaced with the corresponding letter in the outer circle.</p>
  - type: sceneText
    text: >
      <p>Since the two circles could rotate, it was important to position them in a way agreed with who was supposed to decipher the message: for example, at the market with Angela they had agreed so that the "A" of the inner circle corresponded with the "B" of the outer circle.
      </p>
  - type: dialog
    entries:
      - text: "Let's see if I still remember how to do it..."
        char: mathina
        mood: normal


  - type: game
    listTitle: "The jewel I: Try to decode some words using the suggested key."
    text: "Remember: to decode you have to start from the outer circle"
    toolbarText: "Try to decode some words using the suggested key"
    cta: "Try it yourself!"
    tag: app1
    url: /apps/bucca-3-app/bucca-3-app-1.htm?l=1

  - type: clearImage
    id: CaesarJewel
  - type: clearImage
    id: Mathina0

  - type: image
    id: Mathina1
    src: $COMMON/img/characters/mathina/mathina5.png
    style: "height: 70%; bottom: -10%; right: 5%;  z-index: 2; transform: ScaleX(-1);"

  - type: image
    id: Paper1
    src: Pergamena.png
    style: "height: 50%; bottom: 4%; left: 3%;  z-index: 2;"

  - type: dialog
    entries:
      - text: "I would say that I remember very well how this method works! Now let's go back to Angela's message..."
        char: mathina
        mood: normal

  - type: sceneText
    text: >
      <p>Before starting to decode the message, she looked carefully at the piece of wood that came with the letter. It was a small cylinder, probably a key ring. It had many nice inlays, which resembled the decorations of the jewel, maybe they have been made by the same artist. 
      </p>
  - type: sceneText
    text: >
      <p>Two words were visible: ‚ÄúFORWARD DRAWKCAB‚Äù. The letters of the second word appear‚Ä¶ funny, as they were written with a different alphabet. </p>

  - type: dialog
    entries:
      - text: "This is strange - thought Mathina."
        char: mathina
        mood: normal

  - type: sceneText
    text: >
      <p>What does the second word mean? While she was thinking the keyring fell on the bed and flipped over. In a moment Mathina realizes why the word seems so strange. I got it!! It says‚Ä¶ ‚ÄúBACKWARD‚Äù but‚Ä¶ <i>backwards</i>! I wonder what does this mean‚Ä¶ Is it supposed to be a hint? Well‚Ä¶ time to discover that! 
      </p>

  - type: game
    listTitle: "The jewel II: Try to select the correct plaintext."
    text: "Select the plaintext. Remember the hint ‚ÄúBACKWARD‚Äù..."
    toolbarText: "Try to select the correct plaintext"
    cta: "Try it yourself!"
    tag: app2
    url: /apps/bucca-3-app/bucca-3-app-2.htm?l=1

  - type: dialog
    entries:
      - text: "Well‚Ä¶ that was harder than expected, but now I am very curious to see what the lady has to tell me!"
        char: mathina
        mood: normal
 
  - type: clearImage
    id: Paper1
  - type: clearImage
    id: Mathina1






  - type: background
    src: bg3b.jpg
    style: "position: absolute; left: 0; width: 100%; height: 100%; z-index: -1;"

  - type: image
    id: Fisherman1
    src: barca1.png
    style: "width: 8%; bottom: 12%; left: 30%;  z-index: 0;"

  - type: image
    id: Fisherman2
    src: barca2.png
    style: "width: 8%; bottom: 15%; left: 40%;  z-index: 0;"

  - type: image
    id: Fisherman3
    src: barca3.png
    style: "width: 8%; bottom: 20%; left: 60%;  z-index: 0;"

 
  - type: image
    id: Gabbiano1
    src: gabbiano1.png
    style: "width: 8%; top: 10%; left: 10%;  z-index: 0;"

  - type: image
    id: Gabbiano2
    src: gabbiano2.png
    style: "width: 8%; top: 18%; left: 5%;  z-index: 0;"

  - type: image
    id: Gabbiano3
    src: gabbiano3.png
    style: "width: 8%; top: 35%; left: 20%;  z-index: 0;"
 
 
 
 
  - type: sceneText
    text: >
      <p>The next day, after a nice trip on the ferry, Mathina once again wandered around the island. What a nice way to spend the holiday! She entered the bar near the dock and located the lady, who was sitting at a table studying some documents. 
      </p>

  - type: image
    id: Angela1
    src: Angela_2.png
    style: "height: 80%; top: 30%; left: 5%;  z-index: 1; transform: ScaleX(-1);"      


  - type: animation
    target: Fisherman1
    vars:
      duration: 8
      xPercent: 30
      yPercent: -10
      ease: power1.inOut
      repeat: -1
      rotate: 6
      yoyo: true

  - type: animation
    target: Fisherman2
    vars:
      duration: 6
      xPercent: 25
      yPercent: -10
      ease: power1.inOut
      repeat: -1
      rotate: -6
      yoyo: true

  - type: animation
    target: Fisherman3
    vars:
      duration: 10
      xPercent: 40
      yPercent: -20
      ease: power1.inOut
      repeat: -1
      rotate: -6
      yoyo: true

  - type: animation
    target: Gabbiano1
    vars:
      duration: 7
      xPercent: 20
      yPercent: 20
      ease: power1.inOut
      repeat: -1
      rotate: 10
      yoyo: true

  - type: animation
    target: Gabbiano2
    vars:
      duration: 5
      xPercent: 20
      yPercent: 30
      ease: power1.inOut
      repeat: -1
      rotate: -10
      yoyo: true

  - type: animation
    target: Gabbiano3
    vars:
      duration: 9
      xPercent: 20
      yPercent: -40
      ease: power1.inOut
      repeat: -1
      rotate: 15
      yoyo: true



 
  - type: dialog
    entries:
      - text: "Hi again, and welcome back to Buccaneer Island!" 
        char: angela
        mood: happy


  - type: image
    id: Mathina1
    src: $COMMON/img/characters/mathina/mathina5.png
    style: "height: 70%; bottom: -10%; right: 5%;  z-index: 2; transform: ScaleX(-1);"



  - type: dialog
    entries:
      - text: "Hi! I was very surprised to get your message yesterday! Why all these secrecy? I‚Äôm wondering why we are in this place, it is quite crowded, don‚Äôt you fear somebody can overhear us?" 
        char: mathina
        mood: happy
  - type: dialog
    entries:
      - text: "The best place to talk in secret is where everybody can hear you - replied the old lady."
        char: angela
        mood: normal
  - type: sceneText
    text: >
      <p>"Is this another riddle?" Mathina replied, a bit confused.</p>
  - type: dialog
    entries:
      - text: "Hahaha!! No, no! Too many riddles all together! But tell me, how did you find my twist to our old cypher, in the message I sent to you?"
        char: angela
        mood: happy
  - type: dialog
    entries:
      - text: "That was very clever! Even if‚Ä¶ it becomes very complicated if everybody has to figure out the code every time. Also, if I succeeded, others could have figured out the meaning of the message as well." 
        char: mathina
        mood: surprised
  - type: dialog
    entries:
      - text: "You are correct! You know, we have a saying: ‚ÄúShare the method you use, keep the code for the crew‚Äù!"
        char: angela
        mood: happy
  - type: dialog
    entries:
      - text: "What does this mean?"
        char: mathina
        mood: surprised
  - type: dialog
    entries:
      - text: "It means that if you want to communicate in secret, you shall always say the rules you are using when ciphering the message. Then you just have to keep the key secret."
        char: angela
        mood: normal

  - type: dialog
    entries:
      - text: "That‚Äôs funny! I discussed with my little brother about a very similar topic, some time ago."
        char: mathina
        mood: happy
  - type: dialog
    entries:
      - text: "It is common knowledge between pirates! You know, keeping secret just the key is one thing, keeping secret a lot of information is way more complicated, in particular after a long night at the bar. Oh, by the way, you already ordered something? I‚Äôm very curious to try the new ice cream flavour: pearls and salty coconut."
        char: angela
        mood: happy

  - type: dialog
    entries:
      - text: "Seems good! Make it two."
        char: mathina
        mood: talking






  - type: sceneText
    text: >
      <p>The ice cream was tasty indeed, not only the flavour but also to the eyes: the topping made of small pearls of sugar shined along with the light in the room. The necklace shined as well while being there on the table.</p>

  - type: dialog
    entries:
      - text: "This necklace is beautiful: the artist was able to wrap the alphabet in a circle to obtain this effect. I‚Äôm wondering‚Ä¶ How do you manage to write and read coded messages without it? Do you have another one?"
        char: mathina
        mood: normal
  - type: dialog
    entries:
      - text: "Actually, the necklace is unique, but after using it for quite a long time, I notice that there is a simple rule which helps a lot if you want to encode or decode something. Would you like to know it?"
        char: angela
        mood: normal

  - type: dialog
    entries:
      - text: "Yes, please!"
        char: mathina
        mood: talking

  - type: image
    id: CaesarJewel2
    src: CaesarJewelAD.png
    style: "position:absolute; width: 25%; top: 45%; left: 22%"

  - type: sceneText
    text: >
      <p>Angela looked at the necklace on the table. It was positioned such that the A in the inner disk corresponded to the D in the outer one.</p>

  - type: dialog
    entries:
      - text: "Have a look: A goes to D, B goes to E, and so on. Right? Now notice that the space between the letters is always the same: three."
        char: angela
        mood: normal
      - text: "So it is like a rotation: each step is a fraction of a whole turn, and then you move each letter forward of three steps. Right?"
        char: mathina
        mood: normal
      - text: "Correct, but look: you are focused on describing the necklace but you can describe this‚Ä¶ operation in an even simpler way: try to use numbers instead of letters."
        char: angela
        mood: normal

  - type: image 
    id: CaesarJewel3
    src: CaesarJewelNumbers.png
    style: "position:absolute; width: 25%; top: 45%; left: 55%"

  - type: sceneText
    text: >
      <p>Angela used a pen and one of the paper napkins of the ice cream and quickly drew a sketch of the jewel. This time instead of the letters she wrote numbers.</p>

  - type: clearImage
    id: Mathina1

  - type: image
    id: Mathina2
    src: $COMMON/img/characters/mathina/mathina4.png
    style: "height: 70%; bottom: -10%; right: 5%;  z-index: 2; transform: ScaleX(-1);"


  - type: dialog
    entries:
      - text: "...here! Now have another look and remember that the number of steps is three."
        char: angela
        mood: normal
      - text: "Wow, well, it is so much easier now: you are summing. The A - well - the 0, is sent to D, which is 3. So you are just summing the number of steps. That is ingenious. But‚Ä¶ How does this make any sense?"
        char: mathina
        mood: surprised
      - text: "Can you really‚Ä¶ sum letters? At school, I used to learn expressions, in which you sum letters, but it is something more like x+x=2x."
        char: mathina
        mood: surprised
      - text: "You can sum letters, but here is even simpler: think just about using letters as placeholders for numbers."
        char: angela
        mood: normal
      - text: "But there is something even stranger here: look at the letter Y, I mean, the number 24. If it were a sum, I would get 24+3=27. But instead, I wrap around and get the letter B, I mean, the number 1. Are you telling me that 24+3=1?"
        char: mathina
        mood: surprised
      - text: "That is exactly what I am telling you!"
        char: angela
        mood: normal
      - text: "Does this even make sense? If 24+3=1, it means‚Ä¶ wait‚Ä¶ it means that 24+2=0. But 24+2 is 26, how can 26 be equal to 0?"
        char: mathina
        mood: surprised
      - text: "You can see that this is not so strange: we decided that A should correspond to 0, but when you wrap the alphabet in a circle, A is also the letter next to Z, so A corresponds both to 0 and to 26."
        char: angela
        mood: normal

  - type: dialog
    entries:
      - text: "Let‚Äôs assume for a moment that I trust you - you are a pirate lady, after all. How does this help me in coding and decoding messages?"
        char: mathina
        mood: normal

  - type: clearImage
    id: Angela1

  - type: image
    id: Angela2
    src: Angela_3.png
    style: "height: 80%; top: 30%; left: 5%;  z-index: 1; transform: ScaleX(-1);"      



  - type: dialog
    entries:
      - text: "Well, encoding is just fine: you simply have to perform a sum, but the interesting thing about sums is that they can be inverted: for instance, if A+3 is equal to D, then there is an inverse operation which can be made to pass from D to A. Would you guess what this is?"
        char: angela
        mood: normal
      - text: "Easy: the subtraction! If A+3=D, then D-3 must be equal to A..."
        char: mathina
        mood: normal
      - text: "...and to 26..."
        char: angela
        mood: normal
      - text: "I'm puzzled... I am still having trouble understanding this concept..."
        char: mathina
        mood: sad
        
        
  - type: clearImage
    id: CaesarJewel2
  - type: clearImage
    id: CaesarJewel3
        
  - type: dialog
    entries:        
      - text: "Mmh, maybe this will make it easier: think about a clock."
        char: angela
        mood: normal
      - text: "...a clock?"
        char: mathina
        mood: normal


  - type: image 
    id: Clock1
    src: Clock1.png
    style: "position:absolute; width: 25%; bottom: 5%; left: 15%"

  - type: clearImage
    id: Angela2

  - type: dialog
    entries:
      - text: "Yes: assume it is 4 pm and in three hours it will be 7 pm. We have said that 4+3=7."
        char: angela
        mood: normal
      - text: "...correct, I don‚Äôt see any problem here. I have just made the usual sum."
        char: mathina
        mood: normal
      - text: "What if it‚Äôs 11 am?"
        char: angela
        mood: normal
      - text: "..."
        char: mathina
        mood: normal
      - text: "well... not really the usual sum!"
        char: angela
        mood: normal

  - type: dialog
    entries:
      - text: "Well, three hours past 11 am is 2 pm, so 11+3... oh..."
        char: mathina
        mood: normal

  - type: clearImage
    id: Mathina2

  - type: image 
    id: Clock2
    src: Clock2.png
    style: "position:absolute; width: 25%; bottom: 5%; left: 60%"


  - type: dialog
    entries:
      - text: "See? You have 12 hours on your clock, so 12=0, and after 11 you start back from the beginning. For the jewel is the same, but this time your clock has 26 hours."
        char: angela
        mood: normal
      - text: "Care to practice more about this new sum? Let‚Äôs try to do some additions on different clocks."
        char: angela
        mood: normal

  - type: clearImage
    id: Clock1
  - type: clearImage
    id: Clock2
 

  - type: game
    listTitle: "Sum on the clock: Try to calculate the sum of some additions on the clocks."
    text: "Try to calculate the sum of some additions on the clocks"
    toolbarText: "Try to calculate the sum of some additions on the clocks"
    cta: "Try it yourself!"
    tag: app3
    url: /apps/bucca-3-app/bucca-3-app-3.htm?l=1

  - type: image
    id: Angela3
    src: Angela_3.png
    style: "height: 80%; top: 30%; left: 5%;  z-index: 1; transform: ScaleX(-1);"      
  - type: image
    id: Mathina3
    src: $COMMON/img/characters/mathina/mathina4.png
    style: "height: 70%; bottom: -10%; right: 5%;  z-index: 2; transform: ScaleX(-1);"


  - type: dialog
    entries:
      - text: "Well done! Mmh, speaking of clocks, it appears that it is almost time to go if you want to catch the ferry! But I‚Äôll gladly have you for lunch one of the next days."
        char: angela
        mood: happy
      - text: "It would be great!! What about this Friday?"
        char: mathina
        mood: happy

  - type: clearImage
    id: Mathina3
  - type: clearImage
    id: Angela3
    
  - type: clearImage
    id: Fisherman1
  - type: clearImage
    id: Fisherman2
  - type: clearImage
    id: Fisherman3
  - type: clearImage
    id: Gabbiano1
  - type: clearImage
    id: Gabbiano2
  - type: clearImage
    id: Gabbiano3


  - type: background
    src: bg3_plain.jpg
    style: "position: absolute; left: 0; width: 100%; height: 100%; z-index: -1;"

        
  - type: sceneText
    text: >
      <p>Mathina went back to the dock just in time to take the ferry back home. What an intense day! On the way back she thought a bit about how the new sum she learned today worked. Angela told her that the number of hours on the clock is also called <i>modulo</i>, from an ancient word used by an old pirate who spoke Latin! That‚Äôs incredible! </p>

 
  - type: sceneText
    text: >
      <p>Days passed, and Mathina had a huge deal thinking about sums on the clock, and how this was related to secret messages. The trick about using numbers instead of letters helped a lot, and Mathina was quite skilled now in decoding messages, when having the key, of course.</p>


  - type: background
    src: bg3b.jpg
    style: "position: absolute; left: 0; width: 100%; height: 100%; z-index: -1;"


  - type: image
    id: Angela4
    src: Angela_2.png
    style: "height: 80%; top: 30%; left: 5%;  z-index: 1; transform: ScaleX(-1);"      
      

  - type: image
    id: John1
    src: parrot_corpo.png
    style: "height: 30%; top: 27%; left: 2%;  z-index: 3;"
  - type: image
    id: John1_Coda
    src: parrot_coda.png
    style: "height: 20%; top: 34%; left: 6%;  z-index: 2;"
  - type: image
    id: John1_Ala
    src: parrot_ala.png
    style: "height: 30%; top: 20%; left: 5%;  z-index: 3;"
  - type: image
    id: John1_Becco
    src: parrot_becco.png
    style: "height: 15%; top: 23.5%; left: 11%;  z-index: 3;"
          

  - type: sceneText
    text: >
      <p> When she arrived on the Buccaneer Island she found Angela waiting for her at the dock. She was not alone, and already from the ferry, Mathina was able to notice the garish feathers of a beautiful parrot.</p>

  - type: image
    id: Mathina4
    src: $COMMON/img/characters/mathina/mathina3.png
    style: "height: 60%; bottom: -10%; right: 5%;  z-index: 1; transform: ScaleX(-1);"

  - type: animation
    target: John1_Ala
    vars:
      duration: 0.6
      repeat: -1
      rotate: 30
      yoyo: true
  - type: animation
    target: John1_Coda
    vars:
      duration: 0.3
      repeat: -1
      rotate: -8
      yoyo: true 
      
  - type: animation
    target: John1_Becco
    vars:
      duration: 1
      ease: power2.out
      repeat: -1
      rotate: 10
      yoyo: true      
      
      
        
  - type: dialog
    entries:        
      - text: "Hi John! Long time no see!"
        char: mathina
        mood: normal

  - type: sceneText
    text: >
      <p> The parrot was very happy to be cuddled by Mathina and even happier when she gave him a cookie which Angela gave her.</p>

  - type: dialog
    entries:        
      - text: "John was eager to have a walk around, so we decided to come both to wait for you at the deck. "
        char: angela
        mood: happy

  - type: clearImage
    id: John1
  - type: clearImage
    id: John1_Ala
  - type: clearImage
    id: John1_Becco 
  - type: clearImage
    id: John1_Coda  
  - type: clearImage
    id: Mathina4 
  - type: clearImage
    id: Angela4  


  - type: background
    src: bg3.jpg
    style: "position: absolute; left: 0; width: 100%; height: 100%; z-index: -1;"


  - type: image
    id: Barca
    src: barca.png
    style: "height: 16%; top: 16%; right: 14%;  z-index: -3;"

  - type: image
    id: Gabbiano
    src: gabbiano3.png
    style: "height: 6%; top: 16%; right: 19%;  z-index: -3;"

  - type: image
    id: Finestra
    src: finestra.png
    style: "width: 21.09%; top: 10.35%; right: 12.4%;  z-index: -2;"


  - type: image
    id: Dipinto
    src: dipinto.png
    style: "height: 40%; top: 18%; left: 13%;  z-index: -1;  transform: rotate(5deg);"


  - type: sceneText
    text: >
      <p> Mathina followed them to a cozy house not so far from the marketplace. It was located in a good position near the wood but with a great view of the seashore. </p>

  - type: animation
    target: Barca
    vars:
      duration: 8
      xPercent: -30
      yPercent: 5
      ease: power1.inOut
      repeat: -1
      rotate: 10
      yoyo: true

  - type: animation
    target: Gabbiano
    vars:
      duration: 5
      xPercent: -20
      yPercent: -100
      ease: power1.inOut
      repeat: -1
      rotate: -5
      yoyo: true


  - type: dialog
    entries:        
      - text: "You know, every pirate has his own recipes. It is sort of a way to bond with the crew, almost a secret to everyone else."
        char: angela
        mood: normal
      - text: "Wow! And what is your favourite recipe?"
        char: mathina
        mood: happy
      - text: "I should make you guess with a cypher, but I am pretty sure you are very good with that. So‚Ä¶ I love cooking eggplants! And I think you‚Äôll like my cuisine! Even John can‚Äôt resist having a mouthful of that!"
        char: angela
        mood: happy


  - type: sceneText
    text: >
      <p> The lunch was great! Not only the food was delicious, but Angela told many stories about her adventures, and John had a lot of fun correcting her when the details of the stories were too exaggerated. </p>


  - type: image
    id: Angela4
    src: Angela_2.png
    style: "height: 80%; top: 30%; left: 5%;  z-index: 1; transform: ScaleX(-1);"            

  - type: dialog
    entries:     
      - text: "...and so there were 20 bandits..."
        char: angela
        mood: normal
      - text: "...3 bandits..."
        char: parrot
        mood: normal
      - text: "...ok anyway, they managed to decode our messages and they were waiting for us!"
        char: angela
        mood: normal
        
  - type: image
    id: Mathina4
    src: $COMMON/img/characters/mathina/mathina2.png
    style: "height: 40%; bottom: 0%; right: 0%;  z-index: 1;"
        
  - type: dialog
    entries:     
      - text: "Oh, wait! That is something I have been thinking of during these days. You said that they have broken your code, right?"
        char: mathina
        mood: normal
      - text: "Yes."
        char: angela
        mood: normal
      - text: "After all‚Ä¶ if they know how the code works, and you told me basically every pirate does, it is just a matter of checking all the combinations, which are actually not so many."
        char: mathina
        mood: normal
        
  - type: sceneText
    text: >
      <p> Angela was very interested in these comments. She glanced at a portrait of a young lady hanged on the wall and replied. </p>


  - type: dialog
    entries:     
      - text: "That is interesting indeed. However, it is not so easy to make the code more difficult. Did you try to think about how to do that?"
        char: angela
        mood: happy
      - text: "Well, I had plenty of ideas ‚Ä¶ For instance‚Ä¶ Why can‚Äôt we use another alphabet, like greek? We could substitute ‚Äúa‚Äù with ‚Äúùõº‚Äù and so on..."
        char: mathina
        mood: normal


  - type: sceneText
    text: >
      <p> Mathina started discussing very complicated tricks to make the code more complicated. </p>


  - type: clearImage
    id: Angela4

  - type: image
    id: Angela5
    src: Angela_3.png
    style: "height: 80%; top: 30%; left: 5%;  z-index: 1; transform: ScaleX(-1);"      
    

  - type: dialog
    entries:     
      - text: "Wait a moment, remember that it is not just a matter of rendering the code more complex. Pirates still need to learn how to use it, so they will know that ‚Äúùõº‚Äù means just ‚Äúa‚Äù, so even if you require more knowledge to learn the method, your effort to decipher a code is still the same."
        char: angela
        mood: normal
      - text: "You are right. I would still have tried all the 26 letters and would eventually find my answer. But have you had some ideas in this direction? In particular after that last story with the bandits."
        char: mathina
        mood: sad
      - text: "Oh, sure I did. For some time we tried to tweak the code a bit. Just take the jewel and use it twice to encode a message... twice the effort, twice the result."
        char: angela
        mood: normal
        
  - type: clearImage   
    id: Mathina4
    
  - type: image
    id: Mathina5
    src: $COMMON/img/characters/mathina/mathina4.png
    style: "height: 70%; bottom: -10%; right: 1%;  z-index: 2; transform: ScaleX(-1);"


        
  - type: dialog
    entries:             
      - text: "Wow! This seems effective!"
        char: mathina
        mood: excited
      - text: "Unfortunately, there was a big fault in our reasoning. Do you want to try it yourself?"
        char: angela
        mood: normal

  - type: game
    listTitle: "Caesar cipher repeated I: Select the correct result of the method applied two times with the given keys."
    text: "Select the correct result of the method applied two times with the given keys."
    toolbarText: "Select the correct result of the method applied two times with the given keys."
    cta: "Try it yourself!"
    tag: app4
    url: /apps/bucca-3-app/bucca-3-app-4.htm?l=1

  - type: sceneText
    text: >
      <p> After a bit of playing with the jewel and the words, Angela wrote something on a piece of paper and showed it to Mathina. </p>


  - type: image 
    id: TwoMessages
    src: TwoMessages.png
    style: "position:absolute; height: 20%; top: 60%;"
    align: center


  - type: dialog
    entries:     
      - text: "Have a look at these two messages. One is coded by using the jewel just once, and the other has been coded using the jewel two times. Try to understand which one is which."
        char: angela
        mood: normal


  - type: dialog
    entries:     
      - text: "Well‚Ä¶ actually they do not seem so much different."
        char: mathina
        mood: normal
      - text: "Exactly. You can try to understand why it is like this by using our strange sum. Assume the jewel is set for the addition +4. What happens if I use the jewel twice?"
        char: angela
        mood: normal
      - text: "You start with a number, say 3, then first you add 4 so you get 7. Then you add 4 again, so you get 11."
        char: mathina
        mood: normal
      - text: "Ok, but you added 4 twice and when you sum you can choose to add the two 4 together first, so what do you get?"
        char: angela
        mood: normal
      - text: "Oh‚Ä¶ right! If you add 4 twice, you are adding 8."
        char: mathina
        mood: normal
      - text: "...and so in the end even if you are using the jewel twice, you can get the final result by using the jewel just once. And this works even if you change the numbers. If you first add 5 and then you add 6, you can get the same result by adding..."
        char: angela
        mood: normal
      - text: "... 11 just once. It‚Äôs incredible... Now that you said that to me it seems the easiest thing in the world, but before it was hidden behind the mechanics of the jewel and I didn‚Äôt notice."
        char: mathina
        mood: normal
        
  - type: clearImage
    id: TwoMessages
 
  - type: dialog
    entries:            
      - text: "We had the same feeling. You know, it was John who noticed it for the first time. He positioned the jewel in such a way that using it twice resulted in the original message. Can you guess which position is that?"
        char: angela
        mood: normal

  - type: game
    listTitle: "Caesar cipher repeated II: The big disc has to cypher words as the two smaller ones used consecutively. Select the correct position."
    text: "The big disc has to cypher words as the two smaller ones used consecutively. Select the correct position."
    toolbarText: "Select the correct position for the big disc."
    cta: "Try it yourself!"
    tag: app5
    url: /apps/bucca-3-app/bucca-3-app-5.htm?l=1
    
  - type: clearImage
    id: Dipinto

  - type: image
    id: Dipinto1
    src: dipinto_nohook.png
    style: "height: 40%; top: 18%; left: 13%;  z-index: -1;  transform: rotate(5deg);"
    
  - type: sceneText
    text: >
      <p> That game was fun and after playing with that for a while with John, Angela repeated the question. </p>
    

  - type: dialog
    entries:            
      - text: "So, any more ideas to make the cipher more secure?"
        char: angela
        mood: normal
      - text: "Mmh, why do you ask? Do you have some specific quest in mind for that?"
        char: mathina
        mood: surprised

  - type: clearImage
    id: Angela5

  - type: image
    id: Angela6
    src: Angela_1.png
    style: "height: 50%; bottom: 10%; left: 5%;  z-index: 1;"      


  - type: animation
    target: Dipinto1
    vars:
      duration: 4
      x: 110
      y: 120
      rotate: -95
    


  - type: sceneText
    text: >
      <p> Angela looked at Mathina, then at the portrait on the wall. She smiled, with an expression quite similar to the one of the women on the painting. Then, she took the paint off the wall, turning toward Mathina and showing her the back of the portrait. A message had been written there, with a curly and precise writing. </p>
      
  - type: sceneText
    text: >
      <p> The first part was the only one which was easy to understand: 
      </br> 
      </br>
      ‚Äú<i>Dear Angela, I‚Äôm sure you will find a way... 
      </br> 
      </br> 
      Taesimkgcmkufzj rfd uqtugtvdzzx fyq dqjersv. U walzu efyv ekdrzxq eqtwcmtqj iyutt jqvyj dvxrfvp ka gdzyv zlysqie. Z fyuew ktvk rdv fyq bqp rfd r zvi nmp ff qeofpv evoiqk yvejmxqj. Uw kfg nmef ka wuep ktvy xa smtw ka dk fxu tfgjq. Ktv arw zz ktv srduqe tzpve r nfj, agjf rnfhv fyq wuiek nzs sdrztt.
      </i>‚Äù</p>
    

  - type: sceneText
    text: >
      <p> The portrait - or better the back of the portrait was there, staring at everyone in mystery. </p>

  - type: dialog
    entries:            
      - text: "Surely it looks a lot like our cipher, does it not? I‚Äôm guessing that you don‚Äôt know the key, right?"
        char: mathina
        mood: normal
      - text: "Exactly, that is the writing of an old friend of mine, a pirate as well, of course. Actually, she was the one giving me the necklace, some years ago, and she started using the necklace to cipher the messages."
        char: angela
        mood: normal
      - text: "What happened?"
        char: mathina
        mood: surprised
      - text: "We are not sure, you know, between our adventures we all spend our time in different ways, somebody goes to the city, and other lands: I‚Äôve heard that there are strange and funny places to visit."
        char: angela
        mood: normal
      - text: "Once she came back from a trip, she told me she visited a strange fair, where somebody sold her some other necklaces, similar to the one we used, but strangely symmetric." 
        char: angela
        mood: normal
      - text: "She kept telling me that in this necklace lied a new way of communicating in secrecy, sort of a revolution on the field. And she wanted to keep that a secret."
        char: angela
        mood: normal
      - text: "Wow! I‚Äôm wondering how these new necklaces looked like. Did you have the chance to look at them?"
        char: mathina
        mood: excited
      - text: "Unfortunately not: she disappeared for one week and then came back, giving me the portrait and telling me that she hid the necklaces in the island, to keep them secure and that the portrait contains the information to find them."
        char: angela
        mood: normal
      - text: "I‚Äôm wondering where is she now."
        char: mathina
        mood: normal
      - text: "Uh, she was quite tired of being a pirate, so she went north, to the mountains. I‚Äôve heard she took a job training peculiar birds - but better not tell John about that: he would be jealous!"
        char: angela
        mood: normal
      - text: "Hihihi, right! Well... back to the secret message! Well, I‚Äôm sure you already tried it, but... since it looks like our cipher, I‚Äôm wondering if we can just try and decode it, as usual, even without the key."
        char: mathina
        mood: normal
      - text: "Be my guest!"
        char: angela
        mood: normal
 
  - type: game
    listTitle: "The jewel III: Verify that the text has not been cyphered in the usual way."
    text: "Verify that the text has not been cyphered in the usual way."
    toolbarText: "Verify that the text has not been cyphered in the usual way."
    cta: "Try it yourself!"
    tag: app6
    url: /apps/bucca-3-app/bucca-3-app-6.htm?l=1

  - type: clearImage
    id: Angela6
  - type: clearImage
    id: Dipinto1

  - type: image
    id: Angela7
    src: Angela_2.png
    style: "height: 80%; top: 30%; left: 5%;  z-index: 1; transform: ScaleX(-1);"      


  - type: sceneText
    text: >
      <p> After some time spent trying to decipher the code, Mathina looked at Angela quite baffled. </p>

  - type: dialog
    entries:            
      - text: "I‚Äôm not sure what to do: I have tried all the possible combinations of the jewel, but the deciphered texts do not make sense."
        char: mathina
        mood: sad
      - text: "Exactly, and I‚Äôm sure that the original message was written in a language we can understand. But wait, I know another hint. I was told that one needs to use the necklace twice to find the solution."
        char: angela
        mood: normal
      - text: "Twice? But I thought it was useless, am I wrong?"
        char: mathina
        mood: surprised
      - text: "Yes, but maybe there is something we are missing. We proved that using the necklace twice is nothing more than using it once."
        char: angela
        mood: normal
      - text: "Mmh, what if we try to start from the message itself? The spaces are there, and they are not coded with the necklace."
        char: mathina
        mood: normal
      - text: "That‚Äôs true, but are you sure it is not a red herring?"
        char: angela
        mood: normal


  - type: sceneText
    text: >
      <p> Angela wrote something on a piece of paper:
      </br>
      </br>
      <i>WHA TIFTH ECO DEDM ES SAGE W ASWRIT TENLI KETH IS?</i></p>


  - type: dialog
    entries:            
      - text: "Mmh, you are right, but maybe we can just assume that the spaces are in the correct position and then see if we can find something interesting."
        char: mathina
        mood: normal
      - text: "Yeah, this sounds clever. What if we focus on short words?"
        char: angela
        mood: normal
      - text: "Yes: let‚Äôs start with the words with one letter. There is one ‚ÄúU‚Äù, and then one ‚ÄúZ‚Äù, um, then also one, wait, two ‚ÄúR‚Äù."
        char: mathina
        mood: normal
      - text: "If we are assuming the spaces are correct, maybe also the punctuation is. Well, anyway, maybe we can try to make some of them look like ‚ÄúI‚Äù."
        char: angela
        mood: normal
      - text: "It seems legit, let‚Äôs try and check which message we find."
        char: mathina
        mood: normal


  - type: game
    listTitle: "The jewel IV: Verify that, as before, the text has not been cyphered in the usual way."
    text: "Verify that, as before, the text has not been cyphered in the usual way."
    toolbarText: "Verify that, as before, the text has not been cyphered in the usual way."
    cta: "Try it yourself!"
    tag: app7
    url: /apps/bucca-3-app/bucca-3-app-7.htm?l=1
 
  - type: clearImage
    id: Angela7
  - type: image
    id: Angela8
    src: Angela_3.png
    style: "height: 80%; top: 30%; left: 5%;  z-index: 1; transform: ScaleX(-1);"      

 
  - type: dialog
    entries:            
      - text: "It looks strange, it really seems there are no possibilities to find a readable text. But‚Ä¶ wait, you told me that we need to use the necklace twice, right?"
        char: mathina
        mood: sad
      - text: "Exactly, but I am not sure how."
        char: angela
        mood: normal
      - text: "What if for example, we have to use one setting for some part of the text, and some other settings for some other part?"
        char: mathina
        mood: normal
      - text: "Yeah‚Ä¶ you may be right! But it is complicated: how do we decide which part of the text is which?"
        char: angela
        mood: normal
      - text: "We can use words! Maybe the words in an odd position have one key, and words in an even position have another key. Let‚Äôs try it!"
        char: mathina
        mood: excited

  - type: game
    listTitle: "Word by word: Mathina suggest to use two jewels: one to cypher words at even position and one to cypher words at odd position. Convince yourself that also this method does not work."
    text: "Mathina suggest to use two jewels: one to cypher words at even position and one to cypher words at odd position. Convince yourself that also this method does not work."
    toolbarText: "Convince yourself that also this method does not work."
    cta: "Try it yourself!"
    tag: app8
    url: /apps/bucca-3-app/bucca-3-app-8.htm?l=1



  - type: dialog
    entries:            
      - text: "Nothing‚Ä¶ Except that at least in this way we can translate both ‚ÄúU‚Äù and ‚ÄúZ‚Äù to ‚ÄúI‚Äù."
        char: mathina
        mood: sad
      - text: "Well‚Ä¶ at least this is a way to use the necklace twice. However, long words just stay unreadable. Maybe we need to change how we translate it. What about using just letters instead of words? We can try to use one key for letters in odd position, and another key for letters in even position."
        char: angela
        mood: normal
      - text: "Of course! And I noticed that U and Z are in different positions, so we could manage to translate both as I."
        char: mathina
        mood: normal


  - type: game
    listTitle: "A new cipher: Finally the cypher has been understood: the two jewels have to be used to cypher letters at odd and even position respectively."
    text: "Finally the cypher has been understood: the two jewels have to be used to cypher letters at odd and even position respectively. "
    toolbarText: "Try to decode the message!"
    cta: "Try it yourself!"
    tag: app9
    url: /apps/bucca-3-app/bucca-3-app-9.htm?l=1


  - type: dialog
    entries:            
      - text: "That is‚Ä¶ unbelievable! I tried so much time, and now‚Ä¶ here is the solution!"
        char: angela
        mood: normal
      - text: "And that was very very clever: in this way, it is more difficult to try all the possible combinations. I‚Äôm wondering about how many are there."
        char: mathina
        mood: talking
      - text: "Yes, but I‚Äôm wondering more about what is hidden in the tree! Shall we go checking?"
        char: angela
        mood: normal

  - type: clearImage
    id: Barca
  - type: clearImage
    id: Finestra
  - type: clearImage
    id: Gabbiano
  - type: clearImage
    id: Angela8
  - type: clearImage
    id: Mathina5


  - type: background
    src: bg1_plain.jpg
    style: "position: absolute; left: 0; width: 100%; height: 100%; z-index: -1;"

  - type: image
    id: Tree
    src: albero_solo.png
    style: "height: 100%; top: 0%; right: 0%;  z-index: 1;"      
  

  - type: sceneText
    text: >
      <p> Angela, Mathina and John went for the treasure hunt. Well‚Ä¶ Once you know where it is hidden is way easier. The house was not so far from Angela‚Äôs place, and the oak was very evident. </p>

  - type: image
    id: Angela9
    src: Angela_2.png
    style: "height: 70%; bottom: 10%; left: -1%;  z-index: 1; transform: ScaleX(-1);"      


  - type: image
    id: Cassa
    src: cassa.png
    style: "width: 30%; bottom: 5%; left: 25%;  z-index: 1;"      


  - type: image
    id: Mathina5
    src: $COMMON/img/characters/mathina/mathina1.png
    style: "height: 40%; bottom: 3%; left: 8%;  z-index: 2;"

  - type: image
    id: Stella1
    src: stella1.png
    style: "width: 10%; bottom: 40%; left: 20%;  z-index: 1;"      
  - type: image
    id: Stella2
    src: stella2.png
    style: "width: 10%; bottom: 48%; left: 30%;  z-index: 1;"      
  - type: image
    id: Stella3
    src: stella3.png
    style: "width: 10%; bottom: 50%; left: 40%;  z-index: 1;"      
  - type: image
    id: Stella4
    src: stella4.png
    style: "width: 10%; bottom: 48%; left: 50%;  z-index: 1;"      
  - type: image
    id: Stella5
    src: stella5.png
    style: "width: 10%; bottom: 40%; left: 60%;  z-index: 1;"      


  - type: sceneText
    text: >
      <p> The box did produce a weird metal sound while being extracted from the tree.</p>

  - type: animation
    target: Stella1
    vars:
      duration: 4
      xPercent: 0
      yPercent: -30
      ease: power1.inOut
      repeat: -1
      rotate: 15
      yoyo: true
  - type: animation
    target: Stella5
    vars:
      duration: 4
      xPercent: 0
      yPercent: -30
      ease: power1.inOut
      repeat: -1
      rotate: 15
      yoyo: true
  - type: animation
    target: Stella2
    vars:
      duration: 4
      xPercent: 0
      yPercent: -25
      ease: power1.inOut
      repeat: -1
      rotate: 10
      yoyo: true
  - type: animation
    target: Stella4
    vars:
      duration: 5
      xPercent: 0
      yPercent: -25
      ease: power1.inOut
      repeat: -1
      rotate: 10
      yoyo: true
  - type: animation
    target: Stella3
    vars:
      duration: 6
      xPercent: 0
      yPercent: -20
      ease: power1.inOut
      repeat: -1
      rotate: 15
      yoyo: true



  - type: dialog
    entries:            
      - text: "Woow‚Ä¶ what are they?"
        char: mathina
        mood: excited

  - type: sceneText
    text: >
      <p> Several necklaces were placed in the box. The shape was quite strange, as they were small stars with a different number of rays.</p>


  - type: dialog
    entries:            
      - text: "They are beautiful, probably a suggestion for another way to encode messages."
        char: angela
        mood: happy
      - text: "I think this will be a great adventure, just like the one we went on today."
        char: mathina
        mood: talking
      - text: "I‚Äôd like a cookie, please!"
        char: parrot
        mood: normal


  - type: sceneText
    text: >
      <p> Mathina went back to her home, with many, many things in her mind. She just discovered not only how to use the necklace in a way more secure than before, but also had a great adventure with her friend. Who knows which secrets are still hidden in Buccaneer Island. </p>
      
      
  - type: sceneText
    text: >
      <h1>The lost treasure - The End</h1>        




















