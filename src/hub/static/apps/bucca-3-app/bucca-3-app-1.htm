<html>
<head>
<style>
#Partenza {
	position:absolute;
	margin:auto;
	top:25%;
	left:2%;
	width:25%;
	height:50%;
	z-index:2;
	border:solid;
	border-color:#684213;
	font-size: 32px;
	background: #FFFBEB;
	box-shadow: rgb(38, 57, 77) 0px 20px 30px -10px;
	border-radius:15px;
}

.PartContainer {
	position: absolute;
  top: 50%;
	width:95%;
  -ms-transform: translate(0%, -50%);
  transform: translate(0%, -50%);
	padding:15px;
	text-align:center;
}

#Arrivo {
	position:absolute;
	top:25%;
	right:2%;
	width:25%;
	height:50%;
	z-index:2;
	border:solid;
	border-color:#684213;
	background: #FFFBEB;
	box-shadow: rgb(38, 57, 77) 0px 20px 30px -10px;
	border-radius:15px;
}
#DivCanvas {
	position:absolute;
	top:0px;
	left:0px;
	width:100%;
	height:100%;
	z-index:1;
}
#CanvasMathina {
	position:absolute;
	top:0px;
	left:0px;
	width:100%;
	height:100%;
	z-index:2;
	visibility:visible;

}
#successMessage {
  position: absolute;
  /*left: 50%;
  top:50%;
  width: 98%;
  height: 58%;*/
  z-index: 100;
  background: #f3f1cd;
  border: 2px solid #333;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  border-radius: 10px;
  -moz-box-shadow: .3em .3em .5em rgba(0, 0, 0, .8);
  -webkit-box-shadow: .3em .3em .5em rgba(0, 0, 0, .8);
  box-shadow: .3em .3em .5em rgba(0, 0, 0, .8);
  padding: 10% 0%;
text-align: center;
    left: 1%;
    top: 1%;
    width: 98%;
    height: 58%;
}

#failMessage {
  position: absolute;
  /*left: 50%;
  top:50%;
  width: 98%;
  height: 58%;*/
  z-index: 100;
  background: #f3f1cd;
  border: 2px solid #333;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  border-radius: 10px;
  -moz-box-shadow: .3em .3em .5em rgba(0, 0, 0, .8);
  -webkit-box-shadow: .3em .3em .5em rgba(0, 0, 0, .8);
  box-shadow: .3em .3em .5em rgba(0, 0, 0, .8);
  padding: 10% 0%;
text-align: center;
    left: 1%;
    top: 1%;
    width: 98%;
    height: 58%;
}

.button {
  background-color: #4CAF50; /* Green */
  border: 2px;
  margin:5px;
  font-family:Monospace;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 32px;
  border-radius:5px;
}

html { 
  background: url(img/bg3_plain.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
  font-family: "Roboto", sans-serif;
}
</style>
<script>
Number.prototype.mod = function(n) {
    return ((this%n)+n)%n;
};

function Init() {	

Lingua=Number(gup('l', document.location.search));
	
	if (!isNumeric(Lingua)) Lingua=1;
	if (Lingua==0) Lingua=1;
	Traduci(Lingua);
	window.CanvasMathina=document.getElementById('CanvasMathina');
	window.ctxMathina = CanvasMathina.getContext('2d');

	CanvasMathina.addEventListener('mousedown', Down, false);
	CanvasMathina.addEventListener('mouseup', Up, false);
	CanvasMathina.addEventListener('mouseout', Up, false);
	CanvasMathina.addEventListener('mousemove', Move, false);
	
	CanvasMathina.addEventListener('touchstart', Down, false);
	CanvasMathina.addEventListener('touchend', Up, false);
	CanvasMathina.addEventListener('touchmove', Move, false);
	
	window.addEventListener('resize',Resize,false);
	LoadGraphics();
	setTimeout(function(){ 	CheckCaricamento();}, 10);
	GenerateEx();
	
}


function CheckCaricamento() {
	if (NumeroCaricati==2) {
		Reset();	
		Resize(); 
	} else {
		setTimeout(function(){ 	CheckCaricamento();}, 10);
	}
}

function Resize() {
	var doc = document, w = window;
    var docEl = (doc.compatMode && doc.compatMode === 'CSS1Compat')?
            doc.documentElement: doc.body;
    
    var width = docEl.clientWidth;
    var height = docEl.clientHeight;
    
    // mobile zoomed in?
    if ( w.innerWidth && width > w.innerWidth ) {
        width = w.innerWidth;
        height = w.innerHeight;
    }

	window.dimension = [width,height];
	Border=dimension[0]/100;
	window.MenuDim=[dimension[0]*8/10+Border,Border,dimension[0]*2/10-2*Border,dimension[1]-2*Border];
	
	CanvasMathina.width = dimension[0];
	CanvasMathina.height = dimension[1];
	
	Scale=necklace_dimension[1]/dimension[1];
	CentroCesare=[dimension[0]/2,dimension[1]/2];
	Draw(CentroCesare[0],CentroCesare[1],AngPosizione1,AngPosizione2,Scale);	
}


function Reset() {
	necklace_dimension=[bottom_necklace.width,bottom_necklace.height];
	MousePos=[-1,-1];
	AngMouseFinale=0;
	AngMouseIniziale=0;
	AngPosizione1=0;
	AngPosizione2=0;
	CosaStoMuovendo=0;
	CaesarShift=0;
	
	

}

function LoadGraphics() {
	NumeroCaricati=0;
	bottom_necklace = new Image();
	bottom_necklace.src = "./bottom.png";
	bottom_necklace.onload = function() {NumeroCaricati++;}
	
	
	top_necklace = new Image();
	top_necklace.src = "./top.png";
	top_necklace.onload = function() {NumeroCaricati++;}

}

	
function Draw(X0,Y0,A1,A2,Scale) {
ctxMathina.clearRect(0,0,dimension[0],dimension[1]);

	
	let CX=X0-necklace_dimension[0]/(2*Scale);
	let CY=Y0-necklace_dimension[1]/(2*Scale);
	
    ctxMathina.drawImage(bottom_necklace, CX, CY, necklace_dimension[0]/Scale, necklace_dimension[1]/Scale);

	ctxMathina.beginPath();
	ctxMathina.strokeStyle = "rgb(177,133,91)";
	ctxMathina.lineWidth=90/Scale;
	ctxMathina.arc(X0,Y0,230/Scale,0,Math.PI*2,true);
	ctxMathina.stroke();
	
	for (let i=0;i<Alphabet[Lingua].length;i++) {
		Angle=i*Math.PI*2/Alphabet[Lingua].length+A1;
		ctxMathina.save();
		ctxMathina.translate(X0,Y0);
		ctxMathina.rotate(Angle);
		ctxMathina.translate(0, -225/Scale);
		//ctxMathina.rotate(-Angle);
		/*
		ctxMathina.beginPath();
		ctxMathina.textAlign = 'center';
		ctxMathina.textBaseline = 'middle';
		ctxMathina.font = "50px Arial";
		ctxMathina.fillText(Alphabet[Lingua][i], 0,0);	
		*/
		DrawLetter(ctxMathina,Alphabet[Lingua][i],0,0, i%2?"rgba(224,235,237,1.0)":"rgba(234,233,215,1.0)",Scale);	
		
		ctxMathina.translate(0, 225/Scale);
		ctxMathina.rotate(Math.PI/Alphabet[Lingua].length);
		ctxMathina.translate(0, -225/Scale);
		ctxMathina.beginPath();
		ctxMathina.strokeStyle = "rgb(104,66,19)";
		ctxMathina.lineWidth=2;
		ctxMathina.moveTo(0,-50/Scale);
		ctxMathina.lineTo(0,40/Scale);
		ctxMathina.stroke();	
		
		ctxMathina.restore();
		
	}
	
	
	
	
	ctxMathina.beginPath();
	ctxMathina.strokeStyle = "rgb(177,133,91)";
	ctxMathina.lineWidth=90/Scale;
	ctxMathina.arc(X0,Y0,330/Scale,0,Math.PI*2,true);
	ctxMathina.stroke();  
	
	for (let i=0;i<Alphabet[Lingua].length;i++) {
		Angle=i*Math.PI*2/Alphabet[Lingua].length+A2;
		ctxMathina.save();
		ctxMathina.translate(X0,Y0);
		ctxMathina.rotate(Angle);
		ctxMathina.translate(0, -325/Scale);
		//ctxMathina.rotate(-Angle);
		/*
		ctxMathina.beginPath();
		ctxMathina.textAlign = 'center';
		ctxMathina.textBaseline = 'middle';
		ctxMathina.font = "50px Arial";
		ctxMathina.fillText(Alphabet[Lingua][i], 0,0);
*/
		DrawLetter(ctxMathina,Alphabet[Lingua][i],0,0,i%2?"rgba(224,235,237,1.0)":"rgba(234,233,215,1.0)",Scale);
		
		ctxMathina.translate(0, 325/Scale);
		ctxMathina.rotate(Math.PI/Alphabet[Lingua].length);
		ctxMathina.translate(0, -325/Scale);
		ctxMathina.beginPath();
		ctxMathina.strokeStyle = "rgb(104,66,19)";
		ctxMathina.lineWidth=2;
		ctxMathina.moveTo(0,-50/Scale);
		ctxMathina.lineTo(0,40/Scale);
		ctxMathina.stroke();
		
		ctxMathina.restore();
	}
	
	ctxMathina.drawImage(top_necklace, CX,CY, necklace_dimension[0]/Scale, necklace_dimension[1]/Scale);
	WriteLetterTest();
}

function DrawLetter(ctx,text,w,h,Color,Scale) {
	// constants
	const blur = 2/Scale;
	const highLight = "rgba(104,66,19,1)";
	const shadow = "rgba(0,0,0,0.65)";
	const font = (50/Scale)+"px Arial";
	const background = "linear-gradient(to right,  #1e5799 0%,#3096e5 100%)";
	const border = "2px solid #6CF"


	// set up font and font rendering alignment
	ctx.font = font;            
	ctx.textAlign = "center";
	ctx.textBaseline = "middle";

	// draw dark shadow
	ctx.shadowBlur = blur; // shadow
	ctx.fillStyle = ctx.shadowColor = shadow;
	ctx.shadowOffsetY = ctx.shadowOffsetX = blur;
	ctx.fillText(text, w, h);

	// draw highLight
	ctx.fillStyle = ctx.shadowColor = highLight;
	ctx.shadowOffsetY = ctx.shadowOffsetX = -blur;
	ctx.fillText(text,  w, h);

	// draw center text that removes pixels
	ctx.shadowColor = "rgba(0,0,0,0.0)";               // turn off shadow
	ctx.fillStyle = "black";
	ctx.fillStyle = Color;
	//ctx.globalCompositeOperation = "destination-out"; // New pixels will remove old pixels making them transparent
	ctx.fillText(text,  w, h);
	//ctx.globalCompositeOperation = "source-over";     // restore default composite operation.
}

function Move(ev) {
	ev.preventDefault();
	if (ev.changedTouches  != null) {
		touchobject=ev.changedTouches[0];
		var mousexMov = touchobject.clientX-this.offsetLeft;
		var mouseyMov = touchobject.clientY-this.offsetTop;
	} else {
		var mousexMov = ev.clientX-this.offsetLeft;
		var mouseyMov = ev.clientY-this.offsetTop;
	}
	MouseStart=[MousePos[0],MousePos[1]];
	MousePos=[mousexMov,mouseyMov];
	
}

function RandomString(N,Alfabeto) {
	var Risp="";
	for (let i=0;i<N;i++) {
		Risp = Risp + Alfabeto[Math.floor(Math.random()*Alfabeto.length)];
	}
	return Risp;
}

function StringToArray(Text) {
	var Ris=[];
	for (let i=0;i<Text.length;i++) {
		Ris.push(Alphabet[Lingua].indexOf(Text[i]));
	}
	return Ris;
}

function ArrayToString(Arr) {
	var Ris="";
	for (let i=0;i<Arr.length;i++) {
		Ris = Ris + Alphabet[Lingua][Arr[i]];
	}
	return Ris;
}

function Translate(Text,Number) {
	var TextArray=StringToArray(Text.toUpperCase());
	for (let i=0;i<TextArray.length;i++) {
		TextArray[i] = (((TextArray[i]+Number) % Alphabet[Lingua].length)+Alphabet[Lingua].length)%Alphabet[Lingua].length;
	}
	return ArrayToString(TextArray);
}

function Up(ev) {
	if (CosaStoMuovendo==1) {
		AngPosizione1=AngPosizione1+AngMouseFinale-AngMouseIniziale;
		AngPosizione1=Math.round(Alphabet[Lingua].length*AngPosizione1/(2*Math.PI))*(2*Math.PI/Alphabet[Lingua].length);
		CosaStoMuovendo=-1;
	}
	if (CosaStoMuovendo==2) {
		AngPosizione2=AngPosizione2+AngMouseFinale-AngMouseIniziale;
		AngPosizione2=Math.round(Alphabet[Lingua].length*AngPosizione2/(2*Math.PI))*(2*Math.PI/Alphabet[Lingua].length);
		CosaStoMuovendo=-1;
	}
	
	CaesarShift=Math.round(Alphabet[Lingua].length*(AngPosizione2-AngPosizione1)/(2*Math.PI));
	Draw(CentroCesare[0],CentroCesare[1],AngPosizione1,AngPosizione2,Scale);
	ev.preventDefault();
	if (typeof CurrentAnim != 'undefined') cancelAnimationFrame( CurrentAnim );
}

function WriteLetterTest2() {
	ctxMathina.beginPath();
	ctxMathina.fillStyle = "rgb(0,0,255)";
	ctxMathina.textAlign = 'center';
	ctxMathina.textBaseline = 'middle';
	ctxMathina.font = "100px Arial";
	ctxMathina.fillText("HOME", dimension[0]*1/8,150);	
	
	ctxMathina.beginPath();
	ctxMathina.fillStyle = "rgb(0,0,255)";
	ctxMathina.textAlign = 'center';
	ctxMathina.textBaseline = 'middle';
	ctxMathina.font = "100px Arial";
	ctxMathina.fillText(Translate("HOME",CaesarShift), dimension[0]*7/8,150);
}

 function wrapText(context, text, x, y, maxWidth, lineHeight) {
        var words = text.split(' ');
        var line = '';

        for(var n = 0; n < words.length; n++) {
          var testLine = line + words[n] + ' ';
          var metrics = context.measureText(testLine);
          var testWidth = metrics.width;
          if (testWidth > maxWidth && n > 0) {
            context.fillText(line, x, y);
            line = words[n] + ' ';
            y += lineHeight;
          }
          else {
            line = testLine;
          }
        }
        context.fillText(line, x, y);
      }

function WriteLetterTest() {
return 0;
	ctxMathina.beginPath();
	ctxMathina.fillStyle = "rgb(0,0,255)";
	ctxMathina.textAlign = 'center';
	ctxMathina.textBaseline = 'middle';
	ctxMathina.font = "100px Arial";
	ctxMathina.fillText("KRPH", dimension[0]*1/8,150);	
	
	ctxMathina.beginPath();
	ctxMathina.fillStyle = "rgb(0,0,255)";
	ctxMathina.textAlign = 'center';
	ctxMathina.textBaseline = 'middle';
	ctxMathina.font = "70px Arial";
	wrapText(ctxMathina,"Do you think you found the correct key?", dimension[0]*7/8,150,400,60);
}

function Distanza(A,B) {
	return Math.sqrt(Math.pow(B[0]-A[0],2)+Math.pow(B[1]-A[1],2));
}

function Down(ev) {
	ev.preventDefault();
	if (ev.changedTouches  != null) {
		touchobject=ev.changedTouches[0];
		var mousexMov = touchobject.clientX-this.offsetLeft;
		var mouseyMov = touchobject.clientY-this.offsetTop;
	} else {
		var mousexMov = ev.clientX-this.offsetLeft;
		var mouseyMov = ev.clientY-this.offsetTop;
	}


	
	

	MousePos=[mousexMov,mouseyMov];

	DistClickCentro=Distanza(MousePos,CentroCesare);
	if (DistClickCentro>185/Scale && DistClickCentro<275/Scale) CosaStoMuovendo=1;
	else if (DistClickCentro>(330-45)/Scale && DistClickCentro<(330+45)/Scale) CosaStoMuovendo=2;
	else CosaStoMuovendo=0;
	
	MouseStart=[mousexMov,mouseyMov];	
	if (MousePos[0]<=dimension[0]/2) AngMouseIniziale=-find_angle([dimension[0]/2,dimension[1]/2-100],[dimension[0]/2,dimension[1]/2],MousePos);
	else AngMouseIniziale=find_angle([dimension[0]/2,dimension[1]/2-100],[dimension[0]/2,dimension[1]/2],MousePos);
	startAnima();
}


function find_angle(A,B,C) {
    var AB = Math.sqrt(Math.pow(B[0]-A[0],2)+ Math.pow(B[1]-A[1],2));    
    var BC = Math.sqrt(Math.pow(B[0]-C[0],2)+ Math.pow(B[1]-C[1],2)); 
    var AC = Math.sqrt(Math.pow(C[0]-A[0],2)+ Math.pow(C[1]-A[1],2));
    return Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
}

function startAnima() {
    fpsInterval = 1000 / 60;
    then = Date.now();
    startTime = then;
    Anima();
}

function Anima() {
    window.CurrentAnim=requestAnimationFrame(Anima);
    now = Date.now();
    elapsed = now - then;
    if (elapsed > fpsInterval) {
        then = now - (elapsed % fpsInterval);

		if (MousePos[0]<=dimension[0]/2) AngMouseFinale=-find_angle([dimension[0]/2,dimension[1]/2-100],[dimension[0]/2,dimension[1]/2],MousePos);
		else AngMouseFinale=find_angle([dimension[0]/2,dimension[1]/2-100],[dimension[0]/2,dimension[1]/2],MousePos);
		ctxMathina.clearRect(0,0,dimension[0],dimension[1]);
		var Angolo1=AngPosizione1;
		var Angolo2=AngPosizione2;
		if (CosaStoMuovendo==1) Angolo1+=AngMouseFinale-AngMouseIniziale;
		if (CosaStoMuovendo==2) Angolo2+=AngMouseFinale-AngMouseIniziale;
		
		Draw(CentroCesare[0],CentroCesare[1],Angolo1,Angolo2,Scale);
    }
}

function Finisci() {
document.getElementById("successMessage").style.display="block";

}

function Sconfitta() {
document.getElementById("failMessage").style.display="block";

}

function Cesare(Str,Alfabeto,T) {
	Str=Str.toUpperCase();
	Modulo=Alfabeto.length;
	var StrTr="";
	for (let i=0;i<Str.length;i++) {
		PosOr=Alfabeto.indexOf(Str[i]);
		PosNew=(((PosOr+T) % Modulo)+Modulo)%Modulo;
		StrTr = StrTr + Alfabeto[PosNew];
	}

	return StrTr;
}


function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}


function isNumeric(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}

Lingua=1;

Alphabet=[
"", //The 0-th element of the array is void. This is due to the fact that the translation index begin with 1
"ABCDEFGHIJKLMNOPQRSTUVWXYZ",
"ABCDEFGHIJKLMNOPQRSTUVWXYZ",
"ABCDEFGHIJKLMNOPQRSTUVWXYZ",
"ABCDEFGHIJKLMNOPQRSTUVWXYZ"
];
ElencoParole=[
[], //The 0-th element of the array is void. This is due to the fact that the translation index begin with 1
['THING','YEAR','DAY','TIME','HOME','PART','LIFE','TIME','HAND','EYE','NOW','LORD','COUNTRY','MOMENT','WAY','WORLD','WORD','POINT','WORK','STATE','CASE','STREET','NIGHT','VOICE','NAME','EVENING','WATER','FRIEND','DONE','PEOPLE','LOVE','HISTORY','AIR','POWER','HEAD','REASON','SEA','MONTH','LIGHT','SUN','FOOT','PERSON','STREET','SENSE','OPERA','PRODUCT','PARTY','GAME','TEST','COUNTRYSIDE','FLOWER','ROOM','MEASURE','POSITION','NATURE','OFFICE','SPECIES','SUCCESS','AREA','FIRE','VIEW','RESULT','DOUBT','RESEARCH','FIGURE','SQUARE','QUESTION','ENEMY','PENALTY','REASON','TREE','PROCESS','WINE','DOOR','DREAM','DOG','ISLAND','MIND','CAUSE','PERIOD','DEVELOPMENT','SISTER','EFFECT','GARDEN','FACE','BASE','CHARACTER','GUARD','MEMORY','GROUND','ANIMAL','DIRECTION','EXCELLENCE','SCIENCE','FUNCTION','WALL','TOOTH','DISTANCE','TASTE','INSTITUTE','PAINTING','ATTENTION','AUTHOR','FINGER','START','PROGRAM','TITLE','MAY','PRINT','DESTINY','MUST','IRON','TIP','KINGDOM','AGE','MOON','WANT','DIFFERENCE','CONTROL','PAST','SPACE','STAR','RUN','GRASS','FEAR','HEART','IDEA','FUND','EXAMPLE','ORDER','PLACE','FIELD','FACE','NEED','SKY','BED','FRONT','BILL','BODY','NUMBER','PROBLEM','ARM','CHILD','THOUGHT','PEACE','DEATH','END','FORM','REST','STUDY','LAW','BOOK','REST','PLACE','CONDITION','TEACHER','SIGN','LETTER','SCHOOL','ROOM','GROUP','CENTER','HALF','GUY','OBJECT','MOM','THEATER','PRINCIPLE','TERM','TONGUE','PIECE','HAIR','REGION','MOUNTAIN','TRAIN','WINTER','PAGE','PURPOSE','PARTNER','POWER','MUSIC','SHIP','STONE','HOPE','MATTER','LADDER','WAY','WEAPON','JOY','TOPIC','LOOK','REPORT','CLASS','FACE','GESTURE','MORNING','BRIDGE','SMILE','PHRASE','LIMIT','RETURN','WOOD','SIDE','OPERATION','LUNCH','COAST','MEADOW','VALLEY','NORTH','FATIGUE','SMELL','ARTICLE','CONSTRUCTION','COMPARISON','POWER','EFFORT','SAFETY','OFFICIAL','CRISIS','KITCHEN','CAT','TERRITORY','MOMENT','CONTACT','ERROR','HURRY','INTENTION','CULTURE','JUDGEMENT','EXPENSE','HELP','ENVIRONMENT','ANIMO','BEAST','COURTYARD','SKIN','PROPOSAL','SHORE','DRESS','KEY','CURRENT','COURSE','WINDOW','ART','SYSTEM','PLAN','MOUTH','PALACE','STEP','DAY','SERVICE','RELATIONSHIP','ROOM','VALUE','BLOW','INTEREST','SHOULDER','SILENCE','SHADOW','ACTION','WIND','MORNING','ADVICE','PRINCE','TRAVEL','KIND','NEWSPAPER','SPIRIT','HORSE','WALL','SITUATION','LINE','ROUND','CAR','ACT','APPEARANCE','LUCK','GOLD','PARTY','PAPER','MINUTE','WEEK','NEWS','INDUSTRY','SIDE','QUESTION','PLANT','PUBLIC','SEAT','DEAL','RIVER','FIGHT','MARKET','ANGLE','COMPANY','EXPRESSION','VILLA','SERIES','VISIT','COURAGE','DEGREE','ANSWER','TABLE','IMAGE','MOUNTAIN','POWER','BREAD','FOLLOWING','SUMMER','MOVIE','FRUIT','HONOR','DANGER','WRITER','HILL','UNCLE','DEFENCE','METER','NECK','CARE','POET','SEASON','WEIGHT','DECISION','POETRY','CONFIDENCE','WIRE','USE','DRESS','EAR','SLEEP','PORT','FANTASY','TABLE','HUNGER','MILK','CRAFT','WAIT','BATHROOM','LEAF','INSTANT','LAKE','LEMON','APPLE','STRAWBERRY'],
['COSA','ANNO','GIORNO','VOLTA','CASA','PARTE','VITA','TEMPO','MANO','OCCHIO','ORA','SIGNORE','PAESE','MOMENTO','MODO','MONDO','PAROLA','PUNTO','LAVORO','STATO','CASO','STRADA','NOTTE','VOCE','NOME','SERA','ACQUA','AMICO','FATTO','GENTE','AMORE','STORIA','ARIA','FORZA','TESTA','RAGIONE','MARE','MESE','LUCE','SOLE','PIEDE','PERSONA','VIA','SENSO','OPERA','PRODOTTO','FESTA','GIOCO','PROVA','CAMPAGNA','FIORE','SALA','MISURA','POSIZIONE','NATURA','UFFICIO','SPECIE','SUCCESSO','ZONA','FUOCO','VISTA','RISULTATO','DUBBIO','RICERCA','FIGURA','PIAZZA','QUESTIONE','NEMICO','PENA','MOTIVO','RICORDO','ALBERO','PROCESSO','VINO','PORTA','SOGNO','CANE','ISOLA','MENTE','CAUSA','PERIODO','SVILUPPO','SORELLA','EFFETTO','GIARDINO','VOLTO','BASE','CARATTERE','GUARDIA','MEMORIA','TERRENO','ANIMALE','DIREZIONE','ECCELLENZA','SCIENZA','FUNZIONE','PARETE','DENTE','DISTANZA','GUSTO','ISTITUTO','QUADRO','ATTENZIONE','AUTORE','DITO','INIZIO','PROGRAMMA','TITOLO','MAGGIO','STAMPA','DESTINO','DOVERE','FERRO','PUNTA','REGNO','EPOCA','LUNA','VOGLIA','DIFFERENZA','CONTROLLO','PASSATO','SPAZIO','STELLA','CORSA','ERBA','PAURA','CUORE','IDEA','FONDO','ESEMPIO','ORDINE','POSTO','CAMPO','FACCIA','BISOGNO','CIELO','LETTO','FRONTE','CONTO','CORPO','NUMERO','PROBLEMA','BRACCIO','BAMBINO','PENSIERO','PACE','MORTE','FINE','FORMA','RESTO','STUDIO','LEGGE','LIBRO','RESTO','LUOGO','CONDIZIONE','PROFESSORE','SEGNO','LETTERA','SCUOLA','CAMERA','GRUPPO','CENTRO','MEZZO','TIPO','OGGETTO','MAMMA','TEATRO','PRINCIPIO','TERMINE','LINGUA','PEZZO','CAPELLO','REGIONE','MONTE','TRENO','INVERNO','PAGINA','SCOPO','COMPAGNO','POTERE','MUSICA','NAVE','PIETRA','SPERANZA','STAZIONE','MATERIA','SCALA','MANIERA','ARMA','GIOIA','ARGOMENTO','SGUARDO','CLASSE','VISO','GESTO','MATTINO','PONTE','SORRISO','FRASE','LIMITE','RITORNO','BOSCO','ESAME','LATO','OPERAZIONE','PRANZO','COSTA','PRATO','VALLE','NORD','FATICA','ODORE','ARTICOLO','COSTRUZIONE','CONFRONTO','POTENZA','SFORZO','SICUREZZA','UFFICIALE','CRISI','CUCINA','GATTO','TERRITORIO','ATTIMO','CONTATTO','ERRORE','FRETTA','INTENZIONE','CULTURA','GIUDIZIO','SPESA','AIUTO','AMBIENTE','ANIMO','BESTIA','CORTILE','PELLE','PROPOSTA','RIVA','ABITO','CHIAVE','CORRENTE','CORSO','FINESTRA','ARTE','SISTEMA','PIANO','BOCCA','PALAZZO','PASSO','GIORNATA','SERVIZIO','RAPPORTO','STANZA','VALORE','COLPO','INTERESSE','SPALLA','SILENZIO','OMBRA','AZIONE','VENTO','MATTINA','CONSIGLIO','PRINCIPE','VIAGGIO','GENERE','GIORNALE','SPIRITO','CAVALLO','MURO','SITUAZIONE','LINEA','GIRO','AUTOMOBILE','ATTO','ASPETTO','FORTUNA','ORO','PARTITO','CARTA','MINUTO','TRATTO','SETTIMANA','NOTIZIA','INDUSTRIA','FIANCO','DOMANDA','PIANTA','PUBBLICO','SEDE','AFFARE','FIUME','LOTTA','MERCATO','ANGOLO','COMPAGNIA','ESPRESSIONE','VILLA','SERIE','VISITA','CORAGGIO','GRADO','RISPOSTA','TAVOLA','IMMAGINE','MONTAGNA','ENERGIA','PANE','SEGUITO','ESTATE','FILM','FRUTTO','ONORE','PERICOLO','SCRITTORE','COLLINA','ZIO','DIFESA','METRO','COLLO','CURA','POETA','STAGIONE','PESO','DECISIONE','POESIA','FIDUCIA','FILO','USO','VESTITO','ORECCHIO','SONNO','PORTO','FANTASIA','PIANURA','TAVOLO','FAME','LATTE','MESTIERE','ATTESA','BAGNO','FOGLIA','ISTANTE','LAGO','LIMONE','MELA','FRAGOLA'],
['COISA','ANO','DIA','TEMPO','CASA','PAPEL','VIDA','TEMPO','M&Atilde;O','OLHO','AGORA','SENHOR','PA&Iacute;S','MOMENTO','CAMINHO','MUNDO','PALAVRA','APONTAR','TRABALHOS','ESTADO','CASAS','RUA','NOITE','VOZ','NOME','TARDE','AGUA','AMIGO','FEITO','PESSOAS','AMOR','HIST&Oacute;RIA','AR','POT&Ecirc;NCIA','CABE&Ccedil;A','RAZ&Atilde;O','MAR','M&Ecirc;S','LUZ','SOL','P&Eacute;','PESSOA','RUA','SENSO','&Oacute;PERA','PRODUTOS','FESTA','JOGOS','TESTE','CAMPO','FLOR','SALA','MEDIR','POSI&Ccedil;&Atilde;O','NATUREZA','ESCRIT&Oacute;RIO','ESP&Eacute;CIES','SUCESSO','&Aacute;REA','INC&Ecirc;NDIO','VISUALIZAR','RESULTADO','D&Uacute;VIDA','PESQUISA','FIGURAS','QUADRADO','PERGUNTA','INIMIGO','PENA','RAZ&Atilde;O','&Aacute;RVORE','PROCESSAR','VINHO','PORTA','SONHE','C&Atilde;O','ILHA','MENTE','CAUSAS','PER&Iacute;ODO','DESENVOLVIMENTO','IRM&Atilde;','EFEITO','JARDIM','ROSTO','BASE','PERSONAGEM','GUARDA','MEM&Oacute;RIA','CH&Atilde;O','ANIMAL','DIRE&Ccedil;&Atilde;O','EXCEL&Ecirc;NCIA','CI&Ecirc;NCIA','FUN&Ccedil;&Atilde;O','MURO','DENTE','DIST&Acirc;NCIA','CHAVES','INSTITUTO','PINTURA','ATEN&Ccedil;&Atilde;O','AUTOR','DEDO','COME&Ccedil;AR','PROGRAMA','T&Iacute;TULO','MAIO','IMPRESS&Atilde;O','DESTINO','DEVO','FERRO','GORJETA','REINO','ERA','LUA','QUER','DIFEREN&Ccedil;A','PASSADO','ESPA&Ccedil;O','ESTRELA','CORRE','RELVA','MEDO','CORA&Ccedil;&Atilde;O','IDEIA','FUNDO','EXEMPLO','PEDIDO','LUGAR','CAMPO','ROSTO','NECESSIDADE','C&Eacute;U','CAMA','FRENTE','CONTA','CORPO','N&Uacute;MERO','PROBLEMA','BRA&Ccedil;O','FILHO','PENSEI','PAZ','MORTE','FIM','FORMATO','DESCANSO','ESTUDAR','LEI','LIVRO','DESCANSO','LUGAR','DOEN&Ccedil;A','PROFESSOR','ASSINAR','CARTA','ESCOLA','SALA','GRUPO','CENTRO','METADE','CARA','OBJETO','MAM&Atilde;E','TEATRO','PRINC&Iacute;PIO','PRAZO','L&Iacute;NGUA','ARTIGO','CABELO','REGI&Atilde;O','MONTANHA','COMBOIO','INVERNO','P&Aacute;GINA','OBJETIVO','PARCEIRO','POT&Ecirc;NCIA','M&Uacute;SICA','NAVIO','PEDRA','ESPERAN&Ccedil;A','MAT&Eacute;RIA','ESCADA','CAMINHO','ARMA','ALEGRIA','T&Oacute;PICO','VEJA','RELAT&Oacute;RIO','AULA','ROSTO','GEST&Atilde;O','MANH&Atilde;','PONTE','SORRISO','FRASE','LIMITE','RETORNA','MADEIRA','LADO','OPERA&Ccedil;&Atilde;O','ALMO&Ccedil;O','COSTA','PRADO','VALE','NORTE','FADIGA','CHEIRO','ARTIGO','CONSTRU&Ccedil;&Atilde;O','COMPARA&Ccedil;&Atilde;O','POT&Ecirc;NCIA','ESFOR&Ccedil;O','SEGURAN&Ccedil;A','OFICIAL','CRISE','COZINHA','GATO','TERRIT&Oacute;RIO','MOMENTO','CONTATO','ERRO','PRESSA','INTEN&Ccedil;&Atilde;O','CULTURA','JULGAMENTO','DESPESA','AJUDA','MEIO','ANIMO','FERA','P&Aacute;TIO','PELE','PROPOSTA','COSTA','VESTIR','CHAVE','ATUAL','CURSO','JANELA','ARTE','SISTEMA','PLANO','BOCA','PAL&Aacute;CIO','PASSO','DIA','SERVI&Ccedil;O','RELA&Ccedil;&Atilde;O','SALA','VALOR','GOLPE','INTERESSE','OMBRO','SIL&Ecirc;NCIO','SOMBRA','A&Ccedil;AO','VENTO','MANH&Atilde;','CONSELHO','PRINCIPE','VIAJAR','GENTIL','JORNAL','ESP&Iacute;RITO','CAVALO','MURO','SITUA&Ccedil;&Atilde;O','LINHA','REDONDO','CARRO','AGIR','APAR&Ecirc;NCIA','SORTE','OURO','FESTA','PAPEL','MINUTO','SEMANA','NOT&Iacute;CIAS','IND&Uacute;STRIA','LADO','PERGUNTA','PLANTAR','P&Uacute;BLICO','ASSENTO','LIDAR','RIO','LUTAR','MERCADO','&Acirc;NGULO','EMPRESA','EXPRESS&Atilde;O','VILLA','SERIES','VISITA','CORAGEM','GRAU','RESPONDER','TABELA','IMAGEM','MONTANHA','POT&Ecirc;NCIA','P&Atilde;O','SEGUE','VER&Atilde;O','FILME','FRUTA','HONRA','PERIGO','ESCRITOR','COLINA','TIO','DEFESA','METRO','PESCO&Ccedil;O','CUIDADO','POETA','ESTA&Ccedil;&Atilde;O','PESO','DECIS&Atilde;O','POESIA','CONFIAN&Ccedil;A','FIO','USAR','VESTIR','ORELHA','DORMIR','PORTA','FANTASIA','PLAN&Iacute;CIE','TABELA','FOME','LEITE','CONSTRUIR','ESPERAR','BANHEIRO','FOLHA','INSTANTE','LAGO','LIM&Atilde;O','MA&Ccedil;&Atilde;','MORANGO'],
['SACHE','JAHR','TAG','ZEIT','ZUHAUSE','TEIL','LEBEN','ZEIT','HAND','AUGE','JETZT','HERR','LAND','MOMENT','WEG','WELT','WORT','PUNKT','ARBEIT','ZUSTAND','H&Auml;USER','STRASSE','NACHT','STIMME','NAME','ABEND','WASSER','Freund','GETAN','MENSCHEN','LIEBE','GESCHICHTE','LUFT','LEISTUNG','KOPF','GRUND','MEER','MONAT','LICHT','SONNE','FUSS','PERSON','STRASSE','SINN','OPER','PRODUKT','PARTY','SPIEL','PR&Uuml;FUNG','LANDSCHAFT','BLUME','ZIMMER','MESSEN','POSITION','NATUR','B&Uuml;RO','SPEZIES','ERFOLG','BEREICH','FEUER','AUSSICHT','ERGEBNIS','ZWEIFEL','FORSCHUNG','Zahlen','QUADRAT','FRAGE','FEIND','ELFMETER','GRUND','BAUM','PROZESS','WEIN','T&Uuml;R','TRAUM','HUND','INSEL','VERSTAND','URSACHEN','ZEITRAUM','ENTWICKLUNG','SCHWESTER','BEWIRKEN','GARTEN','GESICHT','BASE','CHARAKTER','BEWACHEN','ERINNERUNG','BODEN','TIER','RICHTUNG','EXZELLENZ','WISSENSCHAFT','FUNKTION','WAND','ZAHN','ENTFERNUNG','SCHL&Uuml;SSEL','INSTITUT','MALEREI','BEACHTUNG','AUTOR','FINGER','START','PROGRAMM','TITEL','KANN','DRUCKEN','SCHICKSAL','MUSS','EISEN','TRINKGELD','K&Ouml;NIGREICH','ALTER','MOND','WOLLEN','UNTERSCHIED','STEUERUNG','VERGANGENHEIT','PLATZ','STAR','LAUF','GRAS','ANGST','HERZ','IDEE','FONDS','BEISPIEL','AUFTRAG','PLATZ','FELD','GESICHT','BRAUCHEN','HIMMEL','BETT','VORDERSEITE','RECHNUNG','K&Ouml;RPER','NUMMER','PROBLEM','ARM','KIND','FRIEDEN','TOD','ENDE','BILDEN','STUDIE','RECHT','BUCH','PLATZ','BEDINGUNG','LEHRER','SCHILD','BRIEF','SCHULE','ZIMMER','GRUPPE','CENTER','H&Auml;LFTE','KERL','OBJEKT','MAMA','THEATER','PRINZIP','BEGRIFF','ZUNGE','ST&Uuml;CK','HAAR','REGION','BERG','ZUG','WINTER','SEITE','ZWECK','PARTNER','LEISTUNG','MUSIK','SCHIFF','STEIN','HOFFEN','ANGELEGENHEIT','LEITER','WEG','WAFFE','FREUDE','THEMA','AUSSEHEN','BERICHT','KLASSE','GESICHT','VERWALTUNG','MORGEN','BR&Uuml;CKE','L&Auml;CHELN','PHRASE','GRENZE','R&Uuml;CKKEHR','HOLZ','SEITE','OPERATION','MITTAGESSEN','K&Uuml;STE','WIESE','SENKE','NORDEN','ERM&Uuml;DEN','GERUCH','ARTIKEL','KONSTRUKTION','VERGLEICH','LEISTUNG','ANSTRENGUNG','SICHERHEIT','OFFIZIELL','KRISE','K&Uuml;CHE','KATZE','GEBIET','MOMENT','KONTAKT','ERROR','EILE','ABSICHT','KULTUR','BEURTEILUNG','AUSGABEN','HILFE','UMGEBUNG','ANIMO','TIER','HOF','HAUT','VORSCHLAG','UFER','KLEID','SCHL&Uuml;SSEL','STROM','KURS','FENSTER','KUNST','SYSTEM','PLANEN','MUND','PALAST','SCHRITT','TAG','BEDIENUNG','BEZIEHUNG','ZIMMER','WERT','SCHLAG','INTERESSE','SCHULTER','STILLE','SCHATTEN','AKTION','WIND','MORGEN','RAT','PRINZ','REISE','NETT','ZEITUNG','GEIST','PFERD','WAND','SITUATION','LINIE','RUNDEN','WAGEN','HANDLUNG','AUSSEHEN','GL&Uuml;CK','GOLD','PARTY','PAPIER','MINUTE','WOCHE','NACHRICHTEN','INDUSTRIE','SEITE','FRAGE','PFLANZE','&Ouml;FFENTLICHKEIT','SITZ','DEAL','FLUSS','KAMPF','MARKT','WINKEL','UNTERNEHMEN','AUSDRUCK','VILLA','SERIE','BESUCH','MUT','GRAD','ANTWORTEN','TABELLE','BILD','BERG','LEISTUNG','BROT','FOLGENDES','SOMMER','FILM','OBST','EHRE','ACHTUNG','SCHRIFTSTELLER','H&Uuml;GEL','ONKEL','VERTEIDIGUNG','METER','HALS','PFLEGE','DICHTER','JAHRESZEIT','GEWICHT','ENTSCHEIDUNG','POESIE','VERTRAUEN','DRAHT','BENUTZEN','KLEID','OHR','SCHLAFEN','HAFEN','FANTASIE','FLACHLAND','TABELLE','HUNGER','MILCH','KUNST','WARTEN','BADEZIMMER','BLATT','SOFORTIG','SEE','ZITRONE','APFEL','ERDBEERE']
];
Traduzioni=[
[["Trad1"],"Try to cipher this word, knowing that the key is ",
"Prova a cifrare questa parola, sapendo che la chiave &egrave; ","Tente cifrar esta palavra, sabendo que a chave &eacute; ",
"Versuchen Sie, dieses Wort zu verschl&uuml;sseln, da Sie wissen, dass der Schl&uuml;ssel ist "]
];

function gup( name, url ) {
    if (!url) url = location.href;
    name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec( url );
    return results == null ? null : results[1];
}


function Traduci(Lang) {
  for (var k = 0; k < Traduzioni.length; k++) {
    for (var kk = 0; kk < Traduzioni[k][0].length; kk++) {
      if (document.getElementById(Traduzioni[k][0][kk]) != null) document.getElementById(Traduzioni[k][0][kk]).innerHTML = Traduzioni[k][Lang];
    }
  }
}



function GenerateEx() {
	CorrectAnswer=Math.floor(Math.random()*4+1);
	NumeroParola=Math.floor(Math.random()*ElencoParole[Lingua].length);
	ParolaOriginale=ElencoParole[Lingua][NumeroParola];
	var NumeriTot=Array.from(Array(ElencoParole[Lingua].length).keys());
	NumeriTot.splice(NumeriTot.indexOf(NumeroParola),1);
	NumeriTot=shuffle(NumeriTot);
	ChiaveV=Math.floor(Math.random()*Alphabet[Lingua].length);
	ParolaTradotta=Cesare(ParolaOriginale,Alphabet[Lingua],-ChiaveV);
	document.getElementById("paroladatradurre").innerHTML=ParolaTradotta;
	document.getElementById("ch").innerHTML="A &rarr; "+Alphabet[Lingua][ChiaveV]+ " (" + ChiaveV + ")";
	document.getElementById("Btn1").innerHTML=ElencoParole[Lingua][NumeriTot[0]];
	document.getElementById("Btn2").innerHTML=ElencoParole[Lingua][NumeriTot[1]];
	document.getElementById("Btn3").innerHTML=ElencoParole[Lingua][NumeriTot[2]];
	document.getElementById("Btn4").innerHTML=ElencoParole[Lingua][NumeriTot[3]];
	document.getElementById("Btn"+CorrectAnswer).innerHTML=ParolaOriginale;

}

function Check(N) {
	if (CorrectAnswer==N) Finisci();
	else Sconfitta();


}

function Link() {
	location.reload();

}
</script>
</head>
<body onload="Init()">

<div id="DivCanvas"><canvas id="CanvasMathina"></canvas></div>
<div id="Partenza"><div class="PartContainer"><p><span id="Trad1">Prova a <b id="TextAction">decifrare</b> questa parola, sapendo che la chiave &egrave</span> <span id="ch"></span>:</p>
<p id="paroladatradurre"></p></div></div>
<div id="Arrivo"><div class="PartContainer"><button type="button" onclick="Check(1)" id="Btn1" class="button"></button><br>
<button type="button" onclick="Check(2)" id="Btn2" class="button"></button><br>
<button type="button" onclick="Check(3)" id="Btn3" class="button"></button><br>
<button type="button" onclick="Check(4)" id="Btn4" class="button"></button><br></div></div>
<div id="successMessage" style="display:none">
    <img src="img/happy.png" id="certo" width=8% style=" position: absolute;
  top: 30%;
  right: 46%;"></img>
  <img src="img/Festejos.gif" width=40% style=" position: absolute;
  top: 10%;
  right: 30%; z-index: -1;"> </img>
	   
	<img src="img/refresh.png" onclick="Link();" width=10% style=" position: absolute;
  top: 60%;
  right: 45%;"></img>
  </div>
  
<div id="failMessage" style="display:none">
    <img src="img/sad.png" id="certo" width=8% style=" position: absolute;
  top: 30%;
  right: 46%;"></img>
 
	   
	<img src="img/refresh.png" onclick="Link();" width=10% style=" position: absolute;
  top: 60%;
  right: 45%;"></img>
  </div>
</body>
</html>